{
  "hash": "bc8c52ada26afc11aa7f0ded00e42f87",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Lab 06 - Take a sad plot and make it better\"\noutput: \n  tufte::tufte_html:\n    css: ../lab.css\n    tufte_variant: \"envisioned\"\n    highlight: pygments\nlink-citations: true\n---\n\n\n\n\nGiven below are two data visualizations that violate many data visualization best practices.\nImprove these visualizations using R and the tips for effective visualizations that we introduced in class.\nYou should produce one visualization per dataset.\nYour visualization should be accompanied by a brief paragraph describing the choices you made in your improvement, specifically discussing what you didn't like in the original plots and why, and how you addressed them in the visualization you created.\n\nOn the due date you will give a brief presentation describing one of your improved visualizations and the reasoning for the choices you made.\n\n# Learning goals\n\n-   Telling a story with data\n-   Data visualization best practices\n-   Reshaping data\n\n# Getting started\n\nGo to the course GitHub organization and locate your homework repo, clone it in RStudio and open the R Markdown document.\nKnit the document to make sure it compiles without errors.\n\n## Warm up\n\nBefore we introduce the data, let's warm up with some simple exercises.\nUpdate the YAML of your R Markdown file with your information, knit, commit, and push your changes.\nMake sure to commit with a meaningful commit message.\nThen, go to your repo on GitHub and confirm that your changes are visible in your Rmd **and** md files.\nIf anything is missing, commit and push again.\n\n## Packages\n\nWe'll use the **tidyverse** package for much of the data wrangling and visualisation and the data lives in the **dsbox** package.\nThese packages are already installed for you.\nYou can load them by running the following in your Console:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse) \nlibrary(dsbox) \n```\n:::\n\n\n## Data\n\nThe datasets we'll use are called `instructors` and `fisheries` from the **dsbox** package.\nSince the datasets are distributed with the package, we don't need to load them separately; they become available to us when we load the package.\nYou can find out more about the datasets by inspecting their documentation, which you can access by running `?instructors` and `?fisheries` in the Console or using the Help menu in RStudio to search for `instructors` or `fisheries`.\nYou can also find this information [here](https://rstudio-education.github.io/dsbox/reference/instructors.html) and [here](https://rstudio-education.github.io/dsbox/reference/fisheries.html).\n\n# Exercises\n\n## Instructional staff employment trends\n\nThe American Association of University Professors (AAUP) is a nonprofit membership association of faculty and other academic professionals.\n[This report](https://www.aaup.org/sites/default/files/files/AAUP_Report_InstrStaff-75-11_apr2013.pdf) compiled by the AAUP shows trends in instructional staff employees between 1975 and 2011, and contains an image very similar to the one given below.\n\n\n::: {.cell fig.fullwidth='true'}\n::: {.cell-output-display}\n![](img/staff-employment.png){width=822}\n:::\n:::\n\n\nLet's start by loading the data used to create this plot.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstaff <- read_csv(\"data/instructional-staff.csv\")\n```\n:::\n\n\nEach row in this dataset represents a faculty type, and the columns are the years for which we have data.\nThe values are percentage of hires of that type of faculty for each year.\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 5 √ó 12\n  faculty_type    `1975` `1989` `1993` `1995` `1999` `2001` `2003` `2005` `2007`\n  <chr>            <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>\n1 Full-Time Tenu‚Ä¶   29     27.6   25     24.8   21.8   20.3   19.3   17.8   17.2\n2 Full-Time Tenu‚Ä¶   16.1   11.4   10.2    9.6    8.9    9.2    8.8    8.2    8  \n3 Full-Time Non-‚Ä¶   10.3   14.1   13.6   13.6   15.2   15.5   15     14.8   14.9\n4 Part-Time Facu‚Ä¶   24     30.4   33.1   33.2   35.5   36     37     39.3   40.5\n5 Graduate Stude‚Ä¶   20.5   16.5   18.1   18.8   18.7   19     20     19.9   19.5\n# ‚Ñπ 2 more variables: `2009` <dbl>, `2011` <dbl>\n```\n\n\n:::\n:::\n\n\nIn order to recreate this visualization we need to first reshape the data to have one variable for faculty type and one variable for year.\nIn other words, we will convert the data from wide format to long format.\n\nBut before we do so, a thought exercise: *How many rows will the long-format data have?* It will have a row for each combination of year and faculty type.\nIf there are 5 faculty types and 11 years of data, how many rows will we have?\n\nWe do the wide to long conversion using a new function: `pivot_longer()`.\nThe animation below show how this function works, as well as its counterpart `pivot_wider()`.\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](img/tidyr-longer-wider.gif)\n:::\n:::\n\n\nThe function has the following arguments:\n\n\n::: {.cell}\n\n```{.r .cell-code}\npivot_longer(data, cols, names_to = \"name\")\n```\n:::\n\n\n-   The first argument is `data` as usual.\n-   The second argument, `cols`, is where you specify which columns to pivot into longer format -- in this case all columns except for the `faculty_type`\n-   The third argument, `names_to`, is a string specifying the name of the column to create from the data stored in the column names of data -- in this case `year`\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstaff_long <- staff %>%\n  pivot_longer(cols = -faculty_type, names_to = \"year\") %>%\n  mutate(year = as.numeric(year))\n```\n:::\n\n\nLet's take a look at what the new longer data frame looks like.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstaff_long\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 55 √ó 3\n   faculty_type               year value\n   <chr>                     <dbl> <dbl>\n 1 Full-Time Tenured Faculty  1975  29  \n 2 Full-Time Tenured Faculty  1989  27.6\n 3 Full-Time Tenured Faculty  1993  25  \n 4 Full-Time Tenured Faculty  1995  24.8\n 5 Full-Time Tenured Faculty  1999  21.8\n 6 Full-Time Tenured Faculty  2001  20.3\n 7 Full-Time Tenured Faculty  2003  19.3\n 8 Full-Time Tenured Faculty  2005  17.8\n 9 Full-Time Tenured Faculty  2007  17.2\n10 Full-Time Tenured Faculty  2009  16.8\n# ‚Ñπ 45 more rows\n```\n\n\n:::\n:::\n\n\nAnd now let's plot is as a line plot.\nA possible approach for creating a line plot where we color the lines by faculty type is the following:\n\n\n::: {.cell fig.fullwidth='true'}\n\n```{.r .cell-code}\nstaff_long %>%\n  ggplot(aes(x = year, y = value, color = faculty_type)) +\n  geom_line()\n```\n\n::: {.cell-output-display}\n![](lab-06-sad-plots_files/figure-html/unnamed-chunk-8-1.png){width=960}\n:::\n:::\n\n\nBut note that this results in a message as well as an unexpected plot.\nThe message is saying that there is only one observation for each faculty type year combination.\nWe can fix this using the `group` aesthetic following.\n\n\n::: {.cell fig.fullwidth='true'}\n\n```{.r .cell-code}\nstaff_long %>%\n  ggplot(aes(x = year, y = value, group = faculty_type, color = faculty_type)) +\n  geom_line()\n```\n\n::: {.cell-output-display}\n![](lab-06-sad-plots_files/figure-html/unnamed-chunk-9-1.png){width=960}\n:::\n:::\n\n\n1.  Include the line plot you made above in your report and make sure the figure width is large enough to make it legible.\n    Also fix the title, axis labels, and legend label.\n\n2.  Suppose the objective of this plot was to show that the proportion of part-time faculty have gone up over time compared to other instructional staff types.\n    What changes would you propose making to this plot to tell this story and why.\n\n3.  Implement the changes you proposed in the previous exercise.\n\nüß∂ ‚úÖ ‚¨ÜÔ∏è Knit, *commit, and push your changes to GitHub with an appropriate commit message. Make sure to commit and push all changed files so that your Git pane is cleared up afterwards.*\n\n## Fisheries\n\nFisheries and Aquaculture Department of the Food and Agriculture Organization of the United Nations collects data on fisheries production of countries.\n[This Wikipedia page](https://en.wikipedia.org/wiki/Fishing_industry_by_country) lists fishery production of countries for 2016.\nFor each country tonnage from capture and aquaculture are listed.\nNote that countries whose total harvest was less than 100,000 tons are not included in the visualization.\n\nA researcher shared with you the following visualization they created based on these data.\nüò≥\n\n\n::: {.cell fig.fullwidth='true'}\n::: {.cell-output-display}\n![](img/fisheries.png){width=1121}\n:::\n:::\n\n\n4.  Can you help them make improve it? First, brainstorm how you would improve it. Then create the improved visualization and write up the changes/decisions you made as bullet points. It's ok if some of your improvements are aspirational, i.e. you don't know how to implement it, but you think it's a good idea.\n\nLoad the data.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfisheries <- read_csv(\"data/fisheries.csv\")\n```\n:::\n\n\n5.  Create a new data visualisation for these data that implements the improvements you proposed in the previous exercise (or many of them as you can).\n\nüß∂ ‚úÖ ‚¨ÜÔ∏è Knit, *commit, and push your changes to GitHub with an appropriate commit message. Make sure to commit and push all changed files so that your Git pane is cleared up afterwards and review the md document on GitHub to make sure you're happy with the final state of your work.*\n\n# Wrapping up\n\nGo back through your write up to make sure you're following coding style guidelines we discussed in class.\nMake any edits as needed.\n\nAlso, make sure all of your R chunks are properly labelled, and your figures are reasonably sized.\n\nOnce the team leader for the week pushes their final changes, others should *pull* the changes and knit the R Markdown document to confirm that they can reproduce the report.\n\n# More ugly charts\n\nWant to see more ugly charts?\n\n-   [Flowing Data - Ugly Charts](https://flowingdata.com/category/visualization/ugly-visualization/)\n-   [Reddit - Data is ugly](https://www.reddit.com/r/dataisugly/)\n-   [Missed Opportunities and Graphical Failures](http://www.datavis.ca/gallery/missed.php)\n-   [(Mostly Bad) Graphics and Tables](http://users.stat.umn.edu/~rend0020/Teaching/STAT8801-resources/graphics/index.html)\n",
    "supporting": [
      "lab-06-sad-plots_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}